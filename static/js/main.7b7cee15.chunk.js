(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/malte-wingen-381988-unsplash.331197b5.jpg"},27:function(e,t,a){e.exports=a.p+"static/media/Spotify_Logo_RGB_Green.11dc437a.png"},28:function(e,t,a){e.exports=a.p+"static/media/Stripe logo - blue.fb4644a0.png"},29:function(e,t,a){e.exports=a(45)},34:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),l=a.n(s),c=(a(34),a(7)),o=a.n(c),i=a(10),m=a(2),u=a(3),h=a(5),p=a(4),d=a(6),g=a(8),b=a(14),f=a(26);function v(e){if(!e.ok){if(e.status>=400&&e.status<500)return e.json().then(function(e){throw e});throw{errorMessage:"Please try again later, server is not responsed"}}}function E(){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"https://secret-plateau-59047.herokuapp.com/access_token",e.abrupt("return",fetch("https://secret-plateau-59047.herokuapp.com/access_token").then(function(e){return v(e),e.json()}).then(function(e){return e.access_token}).catch(function(e){return console.log(e)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function N(e,t){return k.apply(this,arguments)}function k(){return(k=Object(i.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{method:"GET",headers:new Headers({Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(a)})}).then(function(e){return v(e),e.json()}).then(function(e){return console.log(e),e}).catch(function(e){return console.log(e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function S(e,t,a,n){return j.apply(this,arguments)}function j(){return(j=Object(i.a)(o.a.mark(function e(t,a,n,r){var s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s="https://secret-plateau-59047.herokuapp.com/api/auth/"+t,e.abrupt("return",fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:n,password:r})}).then(function(e){return v(e),e.json()}).then(function(e){return console.log(e),e}).catch(function(e){return console.log(e)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function O(e,t){return x.apply(this,arguments)}function x(){return(x=Object(i.a)(o.a.mark(function e(t,a){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://secret-plateau-59047.herokuapp.com/test/"+t,e.abrupt("return",fetch(n,{headers:{authorization:"Bearer ".concat(a)}}).then(function(e){return v(e),e.json()}).then(function(e){return console.log(e),"success"===e.auth}).catch(function(e){return console.log(e)}));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function w(){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://secret-plateau-59047.herokuapp.com/api/user/"+localStorage.id,{headers:{"Content-Type":"text/plain",authorization:"Bearer ".concat(localStorage.jwtToken)}}).then(function(e){return e.json()}).catch(function(e){return console.log(e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function T(e,t){return I.apply(this,arguments)}function I(){return(I=Object(i.a)(o.a.mark(function e(t,a){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://secret-plateau-59047.herokuapp.com/api/charge/"+localStorage.id,{method:"POST",headers:{"Content-Type":"text/plain",authorization:"Bearer ".concat(localStorage.jwtToken)},body:JSON.stringify(Object(f.a)({token:t},a))}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var A=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(b.a)({},e.target.name,e.target.value))},a.state={email:"",username:"",password:"",err:!1,sign:!0},a.handleSubmit=a.handleSubmit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){console.log("updata"),console.log(this.state.email,this.state.password),"test@test.com"===this.state.email&&"test"===this.state.password&&document.querySelector("button").click()}},{key:"handleSubmit",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var a,n,r,s,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.sign?"signin":"signup",n=this.state.username,r=this.state.email,s=this.state.password,e.next=7,S(a,n,r,s);case 7:(l=e.sent)?(localStorage.setItem("jwtToken",l.token),localStorage.setItem("id",l.id),localStorage.setItem("username",l.username)):this.setState({err:!0}),this.props.checkAuth();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleTestLogin",value:function(){this.setState({email:"test@test.com",username:"test",password:"test"})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-center"},this.state.sign?"log in":"register"),this.state.err?r.a.createElement("div",{className:"text-center"},"wrong user input"):"",r.a.createElement("form",{className:"col-md-9 mx-auto col-sm-12",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"Email"},"Email address"),r.a.createElement("input",{name:"email",type:"email",className:"form-control",id:"Email",placeholder:"Enter email",onChange:this.handleChange,value:this.state.email}),r.a.createElement("small",{id:"emailHelp",className:"form-text text-muted"},"We'll never share your email with anyone else.")),this.state.sign?"":r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"Username"},"username"),r.a.createElement("input",{name:"username",type:"text",className:"form-control",id:"Username",placeholder:"Enter email",onChange:this.handleChange,value:this.state.username})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"Password"},"Password"),r.a.createElement("input",{name:"password",type:"password",className:"form-control",id:"Password",placeholder:"Password",onChange:this.handleChange,value:this.state.password})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary form-control"},"Submit")),this.state.sign?r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"btn btn-warning form-control",onClick:this.handleTestLogin.bind(this)},"Test User")):"",r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"btn btn-success form-control",onClick:function(){return e.setState({sign:!e.state.sign})}},this.state.sign?"new user":"I have a account"))))}}]),t}(n.Component),_=a(13),L=a.n(_),P=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){E()}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing_back",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"row mx-auto"},r.a.createElement("div",{className:"col-lg-4 col-md-6 col-10 mx-auto background_yellow p-3 rounded shadow-lg",style:{marginTop:"10vh"}},r.a.createElement("h1",{className:"text-center"},"Music store"),r.a.createElement("img",{className:"mb-4 d-block mx-auto",src:L.a,alt:"",width:"100",height:"100"}),r.a.createElement(A,Object.assign({},this.state,this.props)))))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).white={color:"white",fontWeight:"800",textShadow:"1px 1px 0 black"},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"jumbotron jumbo_back"},r.a.createElement("h1",{className:"display-4",style:this.white},"Music Store"),r.a.createElement("p",{className:"lead",style:this.white},"This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information."),r.a.createElement("hr",{className:"my-4"}),r.a.createElement("p",{style:this.white},"It uses utility classNamees for typography and spacing to space content out within the larger container."))}}]),t}(n.Component),W=a(38),q=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).backyellow={background:"#FDE74C"},a.backgreen={background:"#9BC53D"},a.largeText={fontSize:"4rem",fontWeigth:"bolder",color:"white",textShadow:"1px 1px 0 black"},a.marginLarge={margin:"3rem 3rem"},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("main",{className:"background_yellow",style:{minHeight:"100vh"}},r.a.createElement(M,this.props),r.a.createElement("div",{className:"row mx-auto"},r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 mb-3",style:{minWidth:"360px"}},r.a.createElement(W.a,{to:"/search"},r.a.createElement("div",{className:"card background_search shadow",style:{height:"33vh"}},r.a.createElement("div",{className:"card-body",style:this.largeText},r.a.createElement("p",{className:"card-title text-center"},"search ",r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-search",style:{color:"#C3423F"}})))))),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 mb-3",style:{minWidth:"360px"}},r.a.createElement(W.a,{to:"/shoppingCart"},r.a.createElement("div",{className:"card background_shopping shadow",style:{height:"33vh"}},r.a.createElement("div",{className:"card-body",style:this.largeText},r.a.createElement("p",{className:"card-title text-center"},"Shopping Cart",r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-shopping-cart",style:{color:"#9BC53D"}})),r.a.createElement("p",{className:"text-center"}))))),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 mb-3",style:{minWidth:"360px"}},r.a.createElement(W.a,{to:"/user"},r.a.createElement("div",{className:"card background_user shadow",style:{height:"33vh"}},r.a.createElement("div",{className:"card-body",style:this.largeText},r.a.createElement("p",{className:"card-title text-center"},"User",r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-user",style:{color:"#5BC0EB"}})),r.a.createElement("p",{className:"text-center"}))))),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12 mb-3",style:{minWidth:"360px"}},r.a.createElement(W.a,{to:"/about"},r.a.createElement("div",{className:"card background_about shadow",style:{height:"33vh"}},r.a.createElement("div",{className:"card-body",style:this.largeText},r.a.createElement("p",{className:"card-title text-center"},"About",r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-book",style:{color:"#C3423F"}})),r.a.createElement("p",{className:"text-center"}))))),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"}),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"}),r.a.createElement("div",{className:"col-md-3 col-sm-6 col-xs-12"})))}}]),t}(n.Component),z=a(27),B=a.n(z),H=a(28),F=a.n(H),U=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row mx-auto"},r.a.createElement("div",{role:"main",className:"col-md-12 px-4"},r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"About"),r.a.createElement("div",{className:"btn-toolbar mb-2 mb-md-0"})),r.a.createElement("div",{className:"background_black p-2",style:{minHeight:"70vh"}},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row m-1 pt-2 pb-2 background_green border rounded p-2"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 p-0",style:{background:"#fff"}},r.a.createElement("img",{className:"card-img shadow",src:B.a,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{fontWeight:"bold"}},"This product uses the Spotify API but is not endorsed by Spotify."))),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row m-1 pt-2 pb-2 background_green border rounded p-2"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 p-0",style:{background:"#fff"}},r.a.createElement("img",{className:"card-img shadow",src:F.a,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{fontWeight:"bold"}},"This product uses the Stripe API.")))))))}}]),t}(n.Component),D=a(17),R=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).screen={height:"100vh",background:"#C3423F"},a.state={genres:["acoustic","alternative","anime","blues","bossanova","chill","classical","dance","deep-house","disco","drum-and-bass","dubstep","electronic","funk","groove","guitar","happy","hard-rock","hip-hop","holidays","house","indie","industrial","j-pop","j-rock","jazz","k-pop","mandopop","metal","movies","new-release","opera","piano","pop","punk","road-trip","rock","rock-n-roll","romance","sad","sleep","soul","study","summer","tango","trance","work-out"]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleGenreClick",value:function(e){this.props.onSubmit&&(this.props.onSubmit(e.target.innerText),console.log(e.target.innerText)),this.setState({selected:e.target.value})}},{key:"hoverIn",value:function(e){e.target.classList.add("font-large"),e.target.previousElementSibling&&e.target.previousElementSibling.classList.add("font-mid"),e.target.nextElementSibling&&e.target.nextElementSibling.classList.add("font-mid")}},{key:"hoverOut",value:function(e){e.target.classList.remove("font-large"),e.target.previousElementSibling&&e.target.previousElementSibling.classList.remove("font-mid"),e.target.nextElementSibling&&e.target.nextElementSibling.classList.remove("font-mid")}},{key:"handleSideShowUP",value:function(){document.querySelector(".side-nav").classList.toggle("hide-nav")}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"fas fa-arrow-circle-right position-fixed btn",style:{zIndex:"3",top:"50%",left:"-25px",fontSize:"2rem"},onClick:this.handleSideShowUP.bind(this)}),r.a.createElement("div",{className:"col-md-2 background_red side-nav hide-nav",style:{transition:"0.3s"}},r.a.createElement("h4",{className:"text-center pt-3 pb-2 mb-3",style:{color:"#fff",wordBreak:"break-all"}},"Recommendations",r.a.createElement("i",{className:"fas fa-times-circle btn close-tag",onClick:this.handleSideShowUP.bind(this)})),r.a.createElement("ul",{className:"list-group list-group-flush"},this.state.genres.map(function(t,a){return r.a.createElement("li",{style:{transition:"0.1s"},onMouseEnter:e.hoverIn.bind(e),onMouseLeave:e.hoverOut.bind(e),onClick:e.handleGenreClick.bind(e),className:"btn btn-outline-warning",key:a},t)}))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleEnterPress=function(e){"Enter"===e.key&&(console.log("enter"),a.handleSearch())},a.state={searchValue:"",searchResults:{}},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleSearchValueChange",value:function(e){this.setState({searchValue:e.target.value})}},{key:"handleSearch",value:function(){if(this.props.onSubmit){var e=this.state.searchValue,t=document.querySelector("select[name=searchType]").value;this.props.onSubmit(e,t)}this.setState({searchValue:""})}},{key:"render",value:function(){return r.a.createElement("div",{className:"input-group mb-3"},r.a.createElement("select",{name:"searchType"},r.a.createElement("option",{value:"album"},"album"),r.a.createElement("option",{value:"artist"},"artist"),r.a.createElement("option",{value:"playlist"},"playlist"),r.a.createElement("option",{value:"track"},"track")),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"search...",value:this.state.searchValue,onChange:this.handleSearchValueChange.bind(this),onKeyPress:this.handleEnterPress}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("span",{onClick:this.handleSearch.bind(this),className:"btn btn-success"},"Search")))}}]),t}(n.Component),V=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleAddShopping",value:function(){this.props.addShopping&&this.props.addShopping(this.props.info,this.props.price,this.props.img)}},{key:"handleRemoveShopping",value:function(){this.props.removeShopping&&this.props.removeShopping(this.props.info)}},{key:"render",value:function(){return r.a.createElement("div",{className:"card background_black"},r.a.createElement("img",{className:"card-img-top",src:this.props.img?this.props.img:L.a,alt:""}),r.a.createElement("div",{className:"card-body",style:{color:"#fff"}},r.a.createElement("h4",null,this.props.info.name),this.props.price?r.a.createElement("div",null,"Artists:",this.props.info.artists[0].name," ",r.a.createElement("br",null),"Price:",this.props.price," ",r.a.createElement("br",null),r.a.createElement("i",{className:"fas fa-shopping-cart"}),"\xa0",r.a.createElement("span",{className:"badge badge-pill badge-info"},this.props.shoppingCart[this.props.info.id]?this.props.shoppingCart[this.props.info.id].qty:0),r.a.createElement("span",{className:"float-right"},r.a.createElement("span",{className:"btn btn-warning btn-sm",onClick:this.handleAddShopping.bind(this)},"+"),"\xa0",r.a.createElement("span",{className:"btn btn-danger btn-sm",onClick:this.handleRemoveShopping.bind(this)},"-"))):""))}}]),t}(n.Component);var $=document.body,G=document.documentElement,K=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={searchResults:[],next:"https://api.spotify.com/v1/browse/new-releases?country=TW&limit=20",genre:"",searchType:"album",Categories:null},a.Scroll=a.Scroll.bind(Object(g.a)(Object(g.a)(a))),a.handleScroll=function(e,t){var a,n;return t||(t=500),function(){var r=this,s=arguments,l=+new Date;a&&l<a+t?(clearTimeout(n),n=setTimeout(function(){a=l,e.apply(r,s)},t)):(a=l,e.apply(r,s))}}(a.Scroll),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.handleSearch(),window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleSubmitSearch",value:function(e,t){""===e&&(e=" "),this.setState({searchResults:[],next:"https://api.spotify.com/v1/search?query=".concat(e,"&type=").concat(t,"&market=TW&offset=0&limit=20"),searchType:t},this.handleSearch)}},{key:"handleGenreSearch",value:function(e){this.setState({searchResults:[],next:"https://api.spotify.com/v1/recommendations?limit=40&market=TW&seed_genres=".concat(e),searchType:"track",genre:e},this.handleSearch)}},{key:"handleSearch",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t,a,n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.next,e.next=3,E();case 3:return a=e.sent,e.next=6,N(t,a);case 6:n=e.sent,r=this.state.searchResults.splice(""),n[this.state.searchType+"s"]&&n[this.state.searchType+"s"].items?this.setState({searchResults:Object(D.a)(r).concat(Object(D.a)(n[this.state.searchType+"s"].items)),next:n[this.state.searchType+"s"].next}):n.seeds?this.setState({searchResults:Object(D.a)(r).concat(Object(D.a)(n[this.state.searchType+"s"])),next:"https://api.spotify.com/v1/recommendations?limit=20&offset=20&=market=TW&seed_genres=".concat(this.state.genre)}):this.setState({next:null});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"Scroll",value:function(){var e=Math.max($.scrollHeight,$.offsetHeight,G.clientHeight,G.scrollHeight,G.offsetHeight),t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);window.scrollY+t>=e-200&&this.state.next&&this.handleSearch()}},{key:"render",value:function(){var e=this;return r.a.createElement("main",null,r.a.createElement("div",{className:"row mx-auto"},r.a.createElement(R,{onSubmit:this.handleGenreSearch.bind(this),categories:this.state.Categories}),r.a.createElement("div",{className:"col-md-10"},r.a.createElement("div",{className:"mt-3"},r.a.createElement(J,{onSubmit:this.handleSubmitSearch.bind(this)}),r.a.createElement("hr",null),r.a.createElement("div",{className:"row mx-auto",style:{minHeight:"90vh"}},"track"!==this.state.searchType?this.state.searchResults.map(function(t,a){return r.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 col-xs-10 mb-3",key:a},r.a.createElement(V,Object.assign({key:a,info:t,title:t.name,img:Boolean(t.images)&&Boolean(t.images[0])?t.images[0].url:L.a,price:"album"===e.state.searchType?300:""},e.props)))}):"","track"===this.state.searchType?this.state.searchResults.map(function(t,a){return r.a.createElement("div",{className:"col-md-3 col-sm-4 col-xs-10 mb-3",key:a},r.a.createElement(V,Object.assign({key:a,info:t,title:t.name,img:Boolean(t.album.images)&&Boolean(t.album.images[0])?t.album.images[0].url:L.a},e.props,{price:20})))}):"",this.state.next?r.a.createElement("div",{className:"lds-dual-ring mx-auto"}):r.a.createElement("div",{className:"col-12 text-center",style:{fontSize:"2rem"}},"No more result"))))))}}]),t}(n.Component),Z=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleClcik",value:function(){console.log(this.props.info.item)}},{key:"render",value:function(){return r.a.createElement("div",{onClick:this.handleClcik.bind(this),className:"col-12"},r.a.createElement("div",{className:"row m-1 pt-2 pb-2 border border-dark rounded shadow"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6"},r.a.createElement("img",{className:"card-img shadow",src:this.props.info.img||L.a,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{fontWeight:"bolder"}},r.a.createElement("h4",null,this.props.info.item.name,"\xa0"),"Artists: ",this.props.info.item.artists[0].name," ",r.a.createElement("br",null),"Price: $",this.props.info.price," ",r.a.createElement("br",null),"qty: ",this.props.info.qty," \xa0")))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).ShoppingItems=function(){var e=[];for(var t in a.state.products)e.push(r.a.createElement(Z,{key:t,info:a.state.products[t]}));return e},a.account=function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row m-1 pt-2 pb-2"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6"},r.a.createElement("img",{className:"card-img shadow",src:L.a,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{fontWeight:"bold",fontSize:"1.5rem"}},"username: ",a.state.username," ",r.a.createElement("br",null),"email: ",a.state.email)))},a.state={username:"",email:"",page:"My music",products:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,console.log(t),this.setState({order:t.order,username:t.username,email:t.email,products:t.product});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"orderList",value:function(){var e=this.state.order.map(function(e){return r.a.createElement("div",{class:"card",key:e._id},r.a.createElement("div",{class:"card-header"},r.a.createElement("h5",{class:"mb-0"},r.a.createElement("button",{class:"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#Id"+e._id},e._id))),r.a.createElement("div",{id:"Id"+e._id,class:"collapse","data-parent":"#orderList"},r.a.createElement("div",{class:"card-body"},Object.values(e.cart).map(function(e){return r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6"},r.a.createElement("img",{className:"card-img shadow",src:e.img,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{fontWeight:"bolder"}},r.a.createElement("h4",null,e.item.name,"\xa0"),"Artists: ",e.item.artists[0].name," ",r.a.createElement("br",null),"Price: $",e.price," ",r.a.createElement("br",null),"qty: ",e.qty," \xa0"))}))))});return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{class:"",id:"orderList"},e))}},{key:"handlePageChange",value:function(e){this.setState({page:e})}},{key:"hoverIn",value:function(e){e.target.classList.add("font-large"),e.target.previousElementSibling&&e.target.previousElementSibling.classList.add("font-mid"),e.target.nextElementSibling&&e.target.nextElementSibling.classList.add("font-mid")}},{key:"hoverOut",value:function(e){e.target.classList.remove("font-large"),e.target.previousElementSibling&&e.target.previousElementSibling.classList.remove("font-mid"),e.target.nextElementSibling&&e.target.nextElementSibling.classList.remove("font-mid")}},{key:"handleSideShowUP",value:function(){document.querySelector(".side-nav").classList.toggle("hide-nav")}},{key:"sideNav",value:function(){var e=this;return["My music","My account","My order"].map(function(t,a){return r.a.createElement("li",{key:a,className:"nav-item btn btn-outline-warning",style:{transition:"0.1s"},onMouseEnter:e.hoverIn.bind(e),onMouseLeave:e.hoverOut.bind(e),onClick:e.handlePageChange.bind(e,t)},t)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"row mx-auto",style:{position:"relative"}},r.a.createElement("i",{className:"fas fa-arrow-circle-right position-fixed btn",style:{zIndex:"2",top:"50%",left:"-25px",fontSize:"2rem"},onClick:this.handleSideShowUP.bind(this)}),r.a.createElement("nav",{className:"col-md-2 background_red side-nav hide-nav",style:{transition:"0.3s"}},r.a.createElement("p",{className:"text-center pt-3 pb-2 mb-3",style:{color:"#fff",fontSize:"1.2rem"}},"Hello ",localStorage.username,r.a.createElement("i",{className:"fas fa-times-circle btn close-tag",onClick:this.handleSideShowUP.bind(this)})),r.a.createElement("ul",{className:"nav flex-column mb-3"},this.sideNav())),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4 "},r.a.createElement("div",{className:"chartjs-size-monitor"},r.a.createElement("div",{className:"chartjs-size-monitor-expand"}),r.a.createElement("div",{className:"chartjs-size-monitor-shrink"})),r.a.createElement("div",{className:"pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",null,this.state.page)),r.a.createElement("div",{style:{minHeight:"90vh"}},r.a.createElement("div",{className:"row"},"My account"===this.state.page?this.account():"","My order"===this.state.page?this.orderList():"","My music"===this.state.page?this.ShoppingItems():""))))}}]),t}(n.Component),Q=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleAddShopping",value:function(){this.props.addShopping&&this.props.addShopping(this.props.info.item,this.props.info.price)}},{key:"handleRemoveShopping",value:function(){this.props.removeShopping&&this.props.removeShopping(this.props.info.item)}},{key:"render",value:function(){return r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row m-1 pt-2 pb-2 background_green border rounded"},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6"},r.a.createElement("img",{className:"card-img shadow",src:this.props.info.img||L.a,alt:""})),r.a.createElement("div",{className:"col-lg-10 col-md-9 col-sm-8 col-6",style:{textShadow:"1px 1px 2px #222222",color:"#f2f2f2",fontWeight:"bold"}},r.a.createElement("h4",null,this.props.info.item.name,"\xa0",r.a.createElement("div",{className:"mt-1"},r.a.createElement("span",{className:"btn btn-warning btn-sm",onClick:this.handleAddShopping.bind(this)},"+"),"\xa0",r.a.createElement("span",{className:"btn btn-danger btn-sm",onClick:this.handleRemoveShopping.bind(this)},"-"))),"Artists: ",this.props.info.item.artists[0].name," ",r.a.createElement("br",null),"Price: $",this.props.info.price,r.a.createElement("div",{className:"m-2 p-1"}),r.a.createElement("span",{className:"float-right d-inline-block",style:{fontWeight:"bolder"}},"qty: ",this.props.info.qty," \xa0 total: ",this.props.info.qty*this.props.info.price,"$"))))}}]),t}(n.Component),X=a(16),ee=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleChange=function(e){if("email"===e.target.name){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.target.value).toLowerCase())?void a.setState(Object(b.a)({},e.target.name,e.target.value)):void 0}"phoneNumber"!==e.target.name?a.setState(Object(b.a)({},e.target.name,e.target.value)):10===e.target.value.length?a.setState(Object(b.a)({},e.target.name,e.target.value)):console.log("not phone number")},a.state={name:"",email:"",address:"",phoneNumber:"",complete:"",payment:""},a.submit=a.submit.bind(Object(g.a)(Object(g.a)(a))),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"submit",value:function(){var e=Object(i.a)(o.a.mark(function e(t){var a,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.props.stripe.createToken({name:"Name"});case 3:if(a=e.sent,n=a.token){e.next=8;break}return this.setState({complete:"false"}),e.abrupt("return");case 8:return e.next=10,T(n.id,{name:this.state.name,email:this.state.email,phoneNumber:this.state.phoneNumber,address:this.state.address,total:this.props.total,userID:localStorage.id,cart:localStorage.cart?JSON.parse(localStorage.cart):""});case 10:e.sent.ok?(this.setState({complete:"true",payment:this.props.total}),this.props.removeAllShopping()):this.setState({complete:"false"});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return"true"===this.state.complete?r.a.createElement("h1",null,"Purchase Complete. payment: ",this.state.payment):r.a.createElement("form",{className:"checkout m-2 form-group border rounded",style:{background:"#9BC53D"}},r.a.createElement("h2",{className:"m-2"},"Submit payment"),"false"===this.state.complete?r.a.createElement("h3",{className:"text-center",style:{color:"red"}},"something gose wrong please check your input"):"",r.a.createElement("div",{className:"form-row m-2"},r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"name"},"name"),r.a.createElement("input",{type:"text",name:"name",onChange:this.handleChange.bind(this),className:"form-control",id:"name",placeholder:"name"})),r.a.createElement("div",{className:"form-group col-md-6"},r.a.createElement("label",{htmlFor:"inputEmail"},"Email"),r.a.createElement("input",{type:"email",name:"email",onChange:this.handleChange.bind(this),className:"form-control",id:"inputEmail",placeholder:"Email"}))),r.a.createElement("div",{className:"form-group m-2"},r.a.createElement("label",{htmlFor:"inputAddress"},"Address"),r.a.createElement("input",{type:"text",name:"address",onChange:this.handleChange.bind(this),className:"form-control",id:"inputAddress",placeholder:"1234 Main St"})),r.a.createElement("div",{className:"form-group m-2"},r.a.createElement("label",{htmlFor:"phoneNumber"},"Phone Number"),r.a.createElement("input",{type:"text",name:"phoneNumber",onChange:this.handleChange.bind(this),className:"form-control",id:"phoneNumber",placeholder:"0912345678"})),r.a.createElement("div",{className:"border border-danger rounded m-2"},r.a.createElement("h3",{className:"m-2"},"Credit Card"),r.a.createElement("div",{className:"form-group m-2"},r.a.createElement("label",{htmlFor:"card-number"},"card number"),r.a.createElement(X.CardNumberElement,{className:"form-control  col-md-6",id:"card-number"})),r.a.createElement("div",{className:"form-group m-2"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement("label",{htmlFor:"expired-date"},"expired date"),r.a.createElement(X.CardExpiryElement,{className:"form-control",id:"expired-date"})),r.a.createElement("div",{className:"form-group col-md-2"},r.a.createElement("label",{htmlFor:"cvc-number"},"cvc"),r.a.createElement(X.CardCVCElement,{className:"form-control",id:"cvc-number"}))))),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement("p",{className:"m-3"},"payment $",this.props.total),r.a.createElement("button",{className:"btn btn-warning m-2 ",onClick:this.submit},"Send")))}}]),t}(n.Component),te=Object(X.injectStripe)(ee),ae=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(s)))).ShoppingItems=function(){var e=[];for(var t in a.props.shoppingCart)e.push(r.a.createElement(Q,Object.assign({key:t,info:a.props.shoppingCart[t]},a.props)));return e},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){for(var e in console.log("shopping page mount"),this.props.shoppingCart)console.log(this.props.shoppingCart[e].item.name),console.log(this.props.shoppingCart[e].item.type)}},{key:"handleCancel",value:function(){this.props.removeAllShopping&&this.props.removeAllShopping()}},{key:"handleCheckOut",value:function(){this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row mx-auto"},r.a.createElement("div",{role:"main",className:"col-md-12 px-4"},r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Shopping Cart"),r.a.createElement("div",{className:"btn-toolbar mb-2 mb-md-0"},r.a.createElement("div",{className:"btn-group mr-2"},r.a.createElement("button",{className:"btn btn-sm btn-outline-primary","data-toggle":"modal","data-target":"#exampleModalCenter"},"check out"),r.a.createElement("button",{onClick:this.handleCancel.bind(this),className:"btn btn-sm btn-outline-danger"},"remove all")))),r.a.createElement("div",{className:"background_black p-2",style:{minHeight:"70vh"}},r.a.createElement("div",{className:"row p-2"},this.ShoppingItems()),r.a.createElement("div",null,r.a.createElement("hr",{style:{background:"white",height:"1px"}}),r.a.createElement("h3",{className:"mr-3 text-right",style:{color:"white"}},"total price:",this.props.total,"$"))))),r.a.createElement("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement(X.StripeProvider,{apiKey:"pk_test_WtTS1S3oqOzys4iqVJtSpOaB"},r.a.createElement("div",{className:"example"},r.a.createElement(X.Elements,null,r.a.createElement(te,this.props))))))))}}]),t}(n.Component),ne=a(50),re=a(46),se=a(49),le=function(){return r.a.createElement(q,null)},ce=function(){return r.a.createElement(U,null)},oe=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ne.a,null,r.a.createElement(re.a,{exact:!0,path:"/",component:le}),r.a.createElement(re.a,{exact:!0,path:"/about",component:ce}),r.a.createElement(re.a,{exact:!0,path:"/search",render:function(t){return r.a.createElement(K,Object.assign({},e.props,t))}}),r.a.createElement(re.a,{exact:!0,path:"/user",render:function(t){return r.a.createElement(Y,Object.assign({},e.props,t))}}),r.a.createElement(re.a,{exact:!0,path:"/shoppingCart",render:function(t){return r.a.createElement(ae,Object.assign({},e.props,t))}}),r.a.createElement(re.a,{exact:!0,path:"/:other",render:function(){return r.a.createElement(se.a,{to:"/"})}}))}}]),t}(n.Component),ie=a(47),me=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(){a.props.add&&a.props.add()},a.state={email:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"handleLogout",value:function(e){this.props.logout&&this.props.logout()}},{key:"render",value:function(){return r.a.createElement("div",{className:"collapse navbar-collapse justify-content-end",id:"Dropdown"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(ie.a,{exact:!0,className:"nav-link",to:"/"},r.a.createElement("i",{className:"fas fa-home"})," Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ie.a,{exact:!0,className:"nav-link",to:"/search"},r.a.createElement("i",{className:"fas fa-search"})," Search")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ie.a,{exact:!0,className:"nav-link",to:"/shoppingCart"},r.a.createElement("i",{className:"fas fa-shopping-cart"}),r.a.createElement("span",{className:"badge badge-pill badge-info"},Object.keys(this.props.shoppingCart).length>0?Object.keys(this.props.shoppingCart).length:""),"shopping cart")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ie.a,{exact:!0,className:"nav-link",to:"/user"},r.a.createElement("i",{className:"fas fa-user"})," User")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(ie.a,{exact:!0,className:"nav-link",to:"/about"},r.a.createElement("i",{className:"fas fa-book"})," About")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(W.a,{className:"nav-link",to:"/",onClick:this.handleLogout.bind(this)},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," Log Out"))))}}]),t}(n.Component),ue=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{className:"background_blue"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement(ie.a,{className:"navbar-brand",to:"/"},r.a.createElement("h2",null,r.a.createElement("i",{className:"fas fa-headphones"})," Music Store")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#Dropdown"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement(me,this.props)))}}]),t}(n.Component),he=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(p.a)(t).call(this,e))).logout=function(){localStorage.removeItem("jwtToken"),localStorage.removeItem("id"),localStorage.removeItem("username"),a.setState({login:!1})},a.state={shoppingCart:{},login:!1,logout:a.logout,total:0,addShopping:a.addShopping.bind(Object(g.a)(Object(g.a)(a))),removeShopping:a.removeShopping.bind(Object(g.a)(Object(g.a)(a))),removeAllShopping:a.removeAllShopping.bind(Object(g.a)(Object(g.a)(a))),checkAuth:a.authUser.bind(Object(g.a)(Object(g.a)(a)))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){if(localStorage.getItem("cart")){var e=JSON.parse(localStorage.getItem("cart")),t=0;for(var a in e)t+=e[a].price*e[a].qty;this.setState({shoppingCart:e,total:t})}}},{key:"componentDidMount",value:function(){this.authUser()}},{key:"authUser",value:function(){var e=Object(i.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.jwtToken){e.next=18;break}return console.log("have token"),e.next=4,O(localStorage.id,localStorage.jwtToken);case 4:if(!e.sent){e.next=11;break}return this.state.login?console.log("not Auth"):this.setState({login:!0}),console.log("auth user "+localStorage.username),e.abrupt("return",!0);case 11:return localStorage.removeItem("jwtToken"),localStorage.removeItem("id"),localStorage.removeItem("username"),this.setState({login:!1}),e.abrupt("return",!1);case 16:e.next=20;break;case 18:return console.log("not auth"),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addShopping",value:function(e,t,a){var n=JSON.parse(JSON.stringify(this.state.shoppingCart)),r=this.state.total;n[e.id]?(n[e.id].qty++,n[e.id].price=t,localStorage.setItem("cart",JSON.stringify(n))):(n[e.id]={item:e,qty:1,price:t,img:a},localStorage.setItem("cart",JSON.stringify(n))),r+=t,this.setState({shoppingCart:n,total:r})}},{key:"removeShopping",value:function(e){var t=JSON.parse(JSON.stringify(this.state.shoppingCart)),a=this.state.total;if(t[e.id]){var n=t[e.id].price;1===t[e.id].qty?delete t[e.id]:t[e.id].qty--,a-n>0?a-=n:a=0}localStorage.setItem("cart",JSON.stringify(t)),this.setState({shoppingCart:t,total:a})}},{key:"removeAllShopping",value:function(){localStorage.removeItem("cart"),this.setState({shoppingCart:{},total:0})}},{key:"render",value:function(){return this.state.login?r.a.createElement("div",null,r.a.createElement(ue,this.state),r.a.createElement(oe,this.state)):r.a.createElement(P,this.state)}}]),t}(n.Component),pe=a(48);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(pe.a,null,r.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.7b7cee15.chunk.js.map